{
  "event": "COMMENT",
  "comments": [
    {
      "path": "server/routes/api/sitemap.xml.ts",
      "position": 22,
      "body": "âš ï¸ **ë³´ì•ˆ ì´ìŠˆ**: `cause: error`ë¡œ ì „ì²´ ì—ëŸ¬ ê°ì²´ë¥¼ ë…¸ì¶œí•˜ë©´ ë‚´ë¶€ DB êµ¬ì¡°ë‚˜ ë¯¼ê°í•œ ì •ë³´ê°€ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ê¶Œì¥ ìˆ˜ì •:**\n```typescript\n} catch (error) {\n  console.error('Error generating sitemap:', error)\n  throw new HTTPError('Failed to generate sitemap', {\n    status: 500,\n    // causeë¥¼ ì œê±°í•˜ê±°ë‚˜, í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì œê±°\n  })\n}\n```"
    },
    {
      "path": "server/routes/api/sitemap.xml.ts",
      "position": 8,
      "body": "ğŸš€ **ì„±ëŠ¥ ìµœì í™” í•„ìš”**: ê¸°ì‚¬ê°€ ë§ì•„ì§ˆìˆ˜ë¡ ë©”ëª¨ë¦¬ì™€ ì‘ë‹µ ì‹œê°„ì´ ë¬¸ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ê¶Œì¥ ìˆ˜ì • (ë©”ëª¨ë¦¬ ìºì‹±):**\n```typescript\nlet cachedSitemap: { data: string; timestamp: number } | null = null\nconst CACHE_DURATION = 3 * 60 * 60 * 1000 // 3ì‹œê°„\n\nexport default defineEventHandler(async () => {\n  const now = Date.now()\n\n  if (cachedSitemap && now - cachedSitemap.timestamp < CACHE_DURATION) {\n    return new Response(cachedSitemap.data, {\n      headers: {\n        'Content-Type': 'application/xml',\n        'Cache-Control': 'public, max-age=10800, s-maxage=10800',\n      },\n    })\n  }\n\n  const articles = await getArticles()\n  const sitemap = generateSitemap(articles)\n  cachedSitemap = { data: sitemap, timestamp: now }\n\n  return new Response(sitemap, { /* ... */ })\n})\n```"
    },
    {
      "path": "src/routes/article.$id.tsx",
      "position": 42,
      "body": "ğŸ“ **Canonical URL ëˆ„ë½**: ê° ê¸°ì‚¬ í˜ì´ì§€ë³„ canonical URLì´ í•„ìš”í•©ë‹ˆë‹¤. ì¤‘ë³µ ì½˜í…ì¸  ë¬¸ì œë¥¼ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ê¶Œì¥ ì¶”ê°€:**\n```typescript\nreturn {\n  meta: getPageMeta({ /* ... */ }),\n  links: [\n    {\n      rel: 'canonical',\n      href: `${SITE_CONFIG.url}/article/${article.id}`,\n    },\n  ],\n}\n```"
    },
    {
      "path": "src/lib/seo.ts",
      "position": 235,
      "body": "ğŸ’¡ **ì½”ë“œ ê°œì„ **: í˜„ì¬ `truncateDescription`ì´ ë‹¨ì–´ ì¤‘ê°„ì—ì„œ ì˜ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ê¶Œì¥ ìˆ˜ì •:**\n```typescript\nexport function truncateDescription(text: string, maxLength = 160): string {\n  if (text.length <= maxLength) return text\n\n  // ë‹¨ì–´ ê²½ê³„ì—ì„œ ìë¥´ê¸°\n  const truncated = text.slice(0, maxLength - 3)\n  const lastSpace = truncated.lastIndexOf(' ')\n\n  return (lastSpace > 0 ? truncated.slice(0, lastSpace) : truncated) + '...'\n}\n```"
    },
    {
      "path": "src/lib/sitemap.ts",
      "position": 61,
      "body": "ğŸ’¡ **í•˜ë“œì½”ë”© ì œê±°**: ì¹´í…Œê³ ë¦¬ë¥¼ í•˜ë“œì½”ë”©í•˜ëŠ” ëŒ€ì‹  ìŠ¤í‚¤ë§ˆì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n**ê¶Œì¥ ìˆ˜ì •:**\n```typescript\nimport { CategorySchema } from '../db/schema'\n\nconst categories = CategorySchema.options.filter(c => c !== 'all')\n```"
    },
    {
      "path": "src/routes/article.$id.tsx",
      "position": 51,
      "body": "ğŸ”’ **íƒ€ì… ì•ˆì „ì„±**: `article.keywords`ì˜ íƒ€ì… ê²€ì¦ì„ ì¶”ê°€í•˜ë©´ ë” ì•ˆì „í•©ë‹ˆë‹¤.\n\n**ê¶Œì¥ ìˆ˜ì •:**\n```typescript\nkeywords: Array.isArray(article.keywords)\n  ? article.keywords\n  : [categoryName, 'ê²½ì œë‰´ìŠ¤', 'ë‰´ìŠ¤ë¶„ì„'],\n```"
    },
    {
      "path": "public/robots.txt",
      "position": 9,
      "body": "ğŸŒ **í™˜ê²½ ì„¤ì •**: Sitemap URLì´ í•˜ë“œì½”ë”©ë˜ì–´ ìˆì–´ ê°œë°œ/ìŠ¤í…Œì´ì§• í™˜ê²½ì—ì„œ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ê¶Œì¥:**\n- ìƒëŒ€ ê²½ë¡œ ì‚¬ìš©: `Sitemap: /api/sitemap.xml`\n- ë˜ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬"
    },
    {
      "path": "src/lib/seo.ts",
      "position": 129,
      "body": "ğŸ“Š **JSON-LD ê°œì„ **: `image` í•„ë“œë¥¼ ImageObject í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ë” í’ë¶€í•œ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ê¶Œì¥ ìˆ˜ì •:**\n```typescript\nimage: article.imageUrl ? {\n  '@type': 'ImageObject',\n  url: article.imageUrl,\n  width: 1200,\n  height: 630,\n} : SITE_CONFIG.image,\n```"
    }
  ],
  "body": "# PR #15 ë¦¬ë·° ìš”ì•½\n\nì „ë°˜ì ìœ¼ë¡œ **ë§¤ìš° ì˜ êµ¬í˜„ëœ SEO ì•„í‚¤í…ì²˜**ì…ë‹ˆë‹¤! ğŸ‰\n\n## âœ… ê¸ì •ì ì¸ ì \n- ì²´ê³„ì ì¸ SEO êµ¬í˜„ (ë©”íƒ€ íƒœê·¸, JSON-LD, ì‚¬ì´íŠ¸ë§µ, robots.txt)\n- ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\n- TypeScript íƒ€ì… ì•ˆì „ì„±\n- ìƒì„¸í•œ ë¬¸ì„œí™”\n\n## ğŸ”§ ì£¼ìš” ê°œì„ ì‚¬í•­\n\n### High Priority (ë°˜ë“œì‹œ ìˆ˜ì •)\n1. âš ï¸ **ë³´ì•ˆ**: `sitemap.xml.ts`ì˜ ì—ëŸ¬ ì²˜ë¦¬ ê°œì„  í•„ìš”\n2. ğŸš€ **ì„±ëŠ¥**: Sitemap ë©”ëª¨ë¦¬ ìºì‹± ì¶”ê°€ í•„ìš”\n\n### Medium Priority (ê¶Œì¥)\n3. ğŸ“ Canonical URL ì¶”ê°€\n4. ğŸ’¡ ì½”ë“œ í’ˆì§ˆ ê°œì„  (truncateDescription, í•˜ë“œì½”ë”© ì œê±°)\n\n### Low Priority (ì„ íƒ)\n5. íƒ€ì… ì•ˆì „ì„±, robots.txt í™˜ê²½ ì„¤ì •, JSON-LD ê°œì„ \n\n## í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸\n- [ ] `/api/sitemap.xml` ì ‘ê·¼ í…ŒìŠ¤íŠ¸\n- [ ] Google Rich Results Test\n- [ ] Facebook/Twitter Card Validator\n- [ ] Lighthouse SEO ì ìˆ˜\n\nìƒì„¸ ë¦¬ë·°ëŠ” ê° íŒŒì¼ì˜ ì½”ë©˜íŠ¸ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”!"
}
